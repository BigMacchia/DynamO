#    DYNAMO:- Event driven molecular dynamics simulator 
#    http://www.marcusbannerman.co.uk/dynamo
#    Copyright (C) 2008  Marcus N Campbell Bannerman <m.bannerman@gmail.com>
#
#    This program is free software: you can redistribute it and/or
#    modify it under the terms of the GNU General Public License
#    version 3 as published by the Free Software Foundation.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.

#using intel-linux ;
import feature : feature ;
feature condor : no yes : propagated optional ;

using gcc : : condor_compile g++ : <compileflags>-DDYNAMO_CONDOR ;

path-constant BOOST_ROOT : boost/tools/build/v2 ;

import dynamo-tags ;

project	: requirements
	  <define>DYNAMO_double_precsision 
	  <define>DYNAMO_Colour
	  <link>static
	  <condor>yes
	  #<define>DYNAMO_WallCollDebug
	  #<toolset>gcc:<cxxflags>-ansi
	  #<toolset>gcc:<cxxflags>-pedantic
	  <toolset>gcc:<cxxflags>-Wno-long-long
	  <toolset>gcc:<cxxflags>-Wno-parentheses
	  <threading>multi:<define>DYNAMO_threading
	  <condor>yes:<define>DYNAMO_CONDOR
	  <tag>@dynamo-tags.naming
	: default-build release
	: build-dir build-dir
	;

#variant PGO : release : <profiling>on <cxxflags>-fprofile-generate <linkflags>-fprofile-generate ;
#variant PGO : release : <cxxflags>-fprofile-use <linkflags>-fprofile-use ;

variant cachegrind : <inlining>on <optimization>speed <debug-symbols>on 
	<profiling>off ;

variant massif : <inlining>off <optimization>speed <debug-symbols>on 
	<profiling>off ;

variant colldebug : debug : <define>DYNAMO_CollDebug ;

exe dynareplex_opt 
    : programs/dynareplex_opt.cpp boost//program_options
    ;

exe dynahist_rw 
    : programs/dynahist_rw.cpp src//dynamo_core
    ;

exe dynarun 
    : programs/dynarun.cpp src//dynamo_core
    ;

exe dynamod 
    : programs/dynamod.cpp src//dynamo_core
    ;

install install-bin 
	: dynarun dynamod
	: <location>bin
	;
	
alias install : install-bin ;

explicit install install-bin ;
