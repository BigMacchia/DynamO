#using intel-linux ;
using gcc ;

path-constant BOOST_ROOT : boost/tools/build/v2 ;

project
	: requirements <variant>debug:<define>DYNAMO_DEBUG 
	  <define>DYNAMO_double_precsision 
	  <variant>release:<define>DYNAMO_Colour
	  <variant>release:<runtime-link>static
	  <variant>debug:<define>DYNAMO_DEBUG <link>static
	  #<define>DYNAMO_WallCollDebug
	  #<toolset>gcc:<cxxflags>-ansi
	  #<toolset>gcc:<cxxflags>-pedantic
	  <toolset>gcc:<cxxflags>-Wno-long-long
	  <toolset>gcc:<cxxflags>-Wno-parentheses
	: default-build release
	: build-dir build-dir
	;

variant cachegrind : <inlining>off <optimization>speed <debug-symbols>on 
	<profiling>off ;

variant colldebug : debug : <define>DYNAMO_CollDebug ;

exe dynareplex_opt 
    : programs/replex_opt.cpp boost//program_options
    : 
    ;

exe dynareplex_opt_d
    : programs/replex_opt.cpp boost//program_options
    : 
    ;

exe dynahist_rw 
    : programs/hist_rw.cpp src//dynamo_core/<link>static
    :
    ;

exe dynahist_rw_d
    : programs/hist_rw.cpp src//dynamo_core_d/<link>static
    :
    ;

exe dynarun 
    : programs/mdrun.cpp src//dynamo_core/<link>static
    : 
    ;

exe dynarun_d
    : programs/mdrun.cpp src//dynamo_core_d/<link>static
    : 
    ;

exe dynamod 
    : programs/configmod.cpp src//dynamo_core/<link>static
    : 
    ;

exe dynamod_d
    : programs/configmod.cpp src//dynamo_core_d/<link>static
    : 
    ;

install install-bin 
	: dynareplex_opt dynahist_rw dynarun dynamod 
	: <location>bin <variant>release
	;

install install-bin 
	: dynareplex_opt_d dynahist_rw_d dynarun_d dynamod_d 
	: <location>bin <variant>debug
	;
	
install install-lib 
	: src//dynamo_core 
	: <location>lib <variant>release
	;

install install-lib 
	: src//dynamo_core_d
	: <location>lib <variant>debug
	;

alias install : install-bin install-lib ;

explicit install install-bin install-lib ;