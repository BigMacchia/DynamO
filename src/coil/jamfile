import glade ;
import ttf ;
import pixbuf ;

lib glut : : <link>shared ;
lib GLU  : : <link>shared ;
lib GL   : : <link>shared ;
lib Xmu  : : <link>shared ;
lib Xext : : <link>shared ;
lib X11  : : <link>shared ;
lib rt   : : <link>shared ;
lib GLEW : : <link>shared ;
lib ftgl : : <link>shared ;
lib OpenCL : : <link>shared ;
lib cwiid : : <link>shared ;


#Test executables for determining what is available in the build environment
exe cwiidtest : tests/wiimote.cpp cwiid ;
exe OpenCLtest : tests/opencl.cpp OpenCL ;
exe OpenCLpptest : tests/openclpp.cpp OpenCL ;


exe coilDependencies : tests/buildreq.cpp : 
[ check-target-builds OpenCLpptest "OpenCL C++ Headers " : : <define>BUILDFAIL ]
[ check-target-builds OpenCLtest "OpenCL " : : <build>BUILDFAIL ]
: : ;

lib coil : [ glob-tree *.cpp *.gladexml *.pixbufsvg *.ttf : tests ]
      glut GLU GL Xmu Xext X11 rt GLEW ../magnet//magnet
      OpenCL ftgl : <include>. <cflags>"`pkg-config gtkmm-2.4 --cflags`"
      #Check if the wii library is installed 
[ check-target-builds cwiidtest "CWiid library (wii remote support)" : <source>cwiid <define>COIL_wiimote : ]
    : : <define>GLVIEWER <include>. 
    <linkflags>"`pkg-config gtkmm-2.4 --libs`" 
    <cflags>"`pkg-config gtkmm-2.4 --cflags`"
    ;

alias test : ;

exe gl_test
    : tests/glviewer_test.cpp coil/<link>static
    ;

